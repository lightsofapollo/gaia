# Chunking task for gaia-ui-tests...
---
task:
  metadata:
    name: 'Gaia ui tests {{chunk}}'
    description: Gaia ui python tests

  workerType: '{{workerType}}'
  provisionerId: '{{provisionerId}}'

  payload:
    # See: travis_ci/gaia_ui_tests/script for how this ties into the built in
    # chunking functionality for the test scripts...
    env:
      SUITE: functional
      THIS_CHUNK: '{{chunk}}'
      TOTAL_CHUNKS: '{{totalChunks}}'

    command:
      - entrypoint
      - ./bin/ci run gaia_ui_tests

    artifacts:
      'public/gecko.log':
        type: file
        path: '{{gaia}}/artifacts/gaia_ui_tests_report.html'
        expires: '{{nextYear}}'

      'public/html_report':
        type: file
        path: '{{gaia}}/artifacts/gaia_ui_tests_gecko.log'
        expires: '{{nextYear}}'

  tags:
    treeherderProject: Gip{{chunk}}
